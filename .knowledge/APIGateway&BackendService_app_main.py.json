{"is_source_file": true, "format": "Python", "description": "Main FastAPI application for the Food Delivery API Gateway. It proxies requests to various microservices, manages authentication, defines routes for user, hotel, menu, cart, order, payment, review, promotion, notification, and location services, and sets up WebSocket communication with NotificationService.", "external_files": ["fastapi", "pydantic", "httpx", "uvicorn"], "external_methods": ["fastapi.FastAPI", "fastapi.APIRouter", "fastapi.responses.JSONResponse", "fastapi.responses.StreamingResponse", "fastapi.responses.PlainTextResponse", "fastapi.middleware.cors.CORSMiddleware", "fastapi.openapi.utils.get_openapi", "fastapi.WebSocket", "fastapi.WebSocketDisconnect", "fastapi.Request", "fastapi.HTTPException", "uvicorn.run"], "published": ["app"], "classes": [{"name": "RefreshRequest", "description": "Pydantic model representing the payload for refreshing tokens."}], "methods": [{"name": "verify_jwt", "description": "FastAPI dependency that verifies JWT tokens by optionally delegating to UserService."}, {"name": "_service_headers", "description": "Helper function to build headers with internal service token or extra headers."}, {"name": "_proxy_headers_from_request", "description": "Constructs headers to forward, excluding hop-by-hop headers."}, {"name": "_read_body_bytes", "description": "Reads request body as bytes."}, {"name": "_forward", "description": "Core function to proxy HTTP requests to target services and stream back responses."}, {"name": "custom_openapi", "description": "Overrides OpenAPI schema generation for minor customization."}], "calls": ["httpx.AsyncClient", "get_openapi", "uvicorn.run"], "search-terms": ["FastAPI", "proxy", "microservices", "WebSocket", "app", "routes", "auth", "cart", "orders", "notifications", "gateway"], "state": 2, "file_id": 3, "knowledge_revision": 7, "git_revision": "", "ctags": [], "hash": "2aaa5f14ed4e02242a9d9fc1bfa80d1b", "format-version": 4, "code-base-name": "APIGateway&BackendService", "filename": "APIGateway&BackendService/app/main.py", "revision_history": [{"7": ""}]}